var Q = require('q');

module.exports = function (opts) {
  var app = opts.libs.app
    , libs = opts.libs
    ;


  /**
   * Get a file
   */
  app.get('/api/filesystem/filemanager/:type/views/:file', function (req, res) {
    libs.filemanager.getOne( opts.baseDir + '/views/' + req.params.file, req.params.type ).then(function(results) {
      res.send(results);
    });
  });

  app.post('/api/filesystem/filemanager/save/:type/views/:file', function (req, res) {
    libs.filemanager.saveFile( opts.baseDir + '/views/' + req.params.file, req.params.type, req.body ).then(function(results) {
      res.send(results);
    });
  });

};